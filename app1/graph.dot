digraph G {
  rankdir = "RL";
  node [shape = rect, fontname = "sans-serif"];
  "random_id.suffix" [label="random_id.suffix"];
  subgraph "cluster_module.alb" {
    label = "module.alb"
    fontname = "sans-serif"
    "module.alb.aws_lb.this" [label="aws_lb.this"];
    "module.alb.aws_lb_listener.http" [label="aws_lb_listener.http"];
    "module.alb.aws_lb_target_group.this" [label="aws_lb_target_group.this"];
    "module.alb.aws_lb_target_group_attachment.this" [label="aws_lb_target_group_attachment.this"];
  }
  subgraph "cluster_module.alb_sg" {
    label = "module.alb_sg"
    fontname = "sans-serif"
    "module.alb_sg.aws_security_group.this" [label="aws_security_group.this"];
    "module.alb_sg.aws_security_group_rule.egress" [label="aws_security_group_rule.egress"];
    "module.alb_sg.aws_security_group_rule.ingress" [label="aws_security_group_rule.ingress"];
  }
  subgraph "cluster_module.db" {
    label = "module.db"
    fontname = "sans-serif"
    "module.db.aws_db_instance.this" [label="aws_db_instance.this"];
    "module.db.aws_db_subnet_group.this" [label="aws_db_subnet_group.this"];
  }
  subgraph "cluster_module.db_secrets" {
    label = "module.db_secrets"
    fontname = "sans-serif"
    "module.db_secrets.aws_secretsmanager_secret.this" [label="aws_secretsmanager_secret.this"];
    "module.db_secrets.aws_secretsmanager_secret_version.this" [label="aws_secretsmanager_secret_version.this"];
    "module.db_secrets.random_password.this" [label="random_password.this"];
  }
  subgraph "cluster_module.ec2_sg" {
    label = "module.ec2_sg"
    fontname = "sans-serif"
    "module.ec2_sg.aws_security_group.this" [label="aws_security_group.this"];
    "module.ec2_sg.aws_security_group_rule.egress" [label="aws_security_group_rule.egress"];
    "module.ec2_sg.aws_security_group_rule.ingress" [label="aws_security_group_rule.ingress"];
  }
  subgraph "cluster_module.my_vpc" {
    label = "module.my_vpc"
    fontname = "sans-serif"
    "module.my_vpc.aws_eip.nat" [label="aws_eip.nat"];
    "module.my_vpc.aws_internet_gateway.main" [label="aws_internet_gateway.main"];
    "module.my_vpc.aws_nat_gateway.main" [label="aws_nat_gateway.main"];
    "module.my_vpc.aws_route.private_nat_access" [label="aws_route.private_nat_access"];
    "module.my_vpc.aws_route.public_internet_access" [label="aws_route.public_internet_access"];
    "module.my_vpc.aws_route_table.private" [label="aws_route_table.private"];
    "module.my_vpc.aws_route_table.public" [label="aws_route_table.public"];
    "module.my_vpc.aws_route_table_association.private" [label="aws_route_table_association.private"];
    "module.my_vpc.aws_route_table_association.public" [label="aws_route_table_association.public"];
    "module.my_vpc.aws_subnet.private" [label="aws_subnet.private"];
    "module.my_vpc.aws_subnet.public" [label="aws_subnet.public"];
    "module.my_vpc.aws_vpc.main" [label="aws_vpc.main"];
  }
  subgraph "cluster_module.rds_sg" {
    label = "module.rds_sg"
    fontname = "sans-serif"
    "module.rds_sg.aws_security_group.this" [label="aws_security_group.this"];
    "module.rds_sg.aws_security_group_rule.egress" [label="aws_security_group_rule.egress"];
    "module.rds_sg.aws_security_group_rule.ingress" [label="aws_security_group_rule.ingress"];
  }
  subgraph "cluster_module.servers" {
    label = "module.servers"
    fontname = "sans-serif"
    "module.servers.aws_eip.this" [label="aws_eip.this"];
    "module.servers.aws_instance.this" [label="aws_instance.this"];
  }
  "module.alb.aws_lb.this" -> "module.alb_sg.aws_security_group.this";
  "module.alb.aws_lb.this" -> "module.my_vpc.aws_subnet.public";
  "module.alb.aws_lb_listener.http" -> "module.alb.aws_lb.this";
  "module.alb.aws_lb_listener.http" -> "module.alb.aws_lb_target_group.this";
  "module.alb.aws_lb_target_group.this" -> "module.my_vpc.aws_vpc.main";
  "module.alb.aws_lb_target_group_attachment.this" -> "module.alb.aws_lb_target_group.this";
  "module.alb.aws_lb_target_group_attachment.this" -> "module.servers.aws_eip.this";
  "module.alb_sg.aws_security_group.this" -> "module.my_vpc.aws_vpc.main";
  "module.alb_sg.aws_security_group_rule.egress" -> "module.alb_sg.aws_security_group.this";
  "module.alb_sg.aws_security_group_rule.ingress" -> "module.alb_sg.aws_security_group.this";
  "module.db.aws_db_instance.this" -> "module.db.aws_db_subnet_group.this";
  "module.db.aws_db_instance.this" -> "module.db_secrets.random_password.this";
  "module.db.aws_db_instance.this" -> "module.rds_sg.aws_security_group.this";
  "module.db.aws_db_subnet_group.this" -> "module.my_vpc.aws_subnet.private";
  "module.db_secrets.aws_secretsmanager_secret.this" -> "random_id.suffix";
  "module.db_secrets.aws_secretsmanager_secret_version.this" -> "module.db_secrets.aws_secretsmanager_secret.this";
  "module.db_secrets.aws_secretsmanager_secret_version.this" -> "module.db_secrets.random_password.this";
  "module.ec2_sg.aws_security_group.this" -> "module.my_vpc.aws_vpc.main";
  "module.ec2_sg.aws_security_group_rule.egress" -> "module.ec2_sg.aws_security_group.this";
  "module.ec2_sg.aws_security_group_rule.ingress" -> "module.alb_sg.aws_security_group.this";
  "module.ec2_sg.aws_security_group_rule.ingress" -> "module.ec2_sg.aws_security_group.this";
  "module.my_vpc.aws_eip.nat" -> "module.my_vpc.aws_internet_gateway.main";
  "module.my_vpc.aws_eip.nat" -> "module.my_vpc.aws_subnet.public";
  "module.my_vpc.aws_internet_gateway.main" -> "module.my_vpc.aws_vpc.main";
  "module.my_vpc.aws_nat_gateway.main" -> "module.my_vpc.aws_eip.nat";
  "module.my_vpc.aws_route.private_nat_access" -> "module.my_vpc.aws_nat_gateway.main";
  "module.my_vpc.aws_route.private_nat_access" -> "module.my_vpc.aws_route_table.private";
  "module.my_vpc.aws_route.public_internet_access" -> "module.my_vpc.aws_internet_gateway.main";
  "module.my_vpc.aws_route.public_internet_access" -> "module.my_vpc.aws_route_table.public";
  "module.my_vpc.aws_route_table.private" -> "module.my_vpc.aws_subnet.private";
  "module.my_vpc.aws_route_table.public" -> "module.my_vpc.aws_vpc.main";
  "module.my_vpc.aws_route_table_association.private" -> "module.my_vpc.aws_route_table.private";
  "module.my_vpc.aws_route_table_association.public" -> "module.my_vpc.aws_route_table.public";
  "module.my_vpc.aws_route_table_association.public" -> "module.my_vpc.aws_subnet.public";
  "module.my_vpc.aws_subnet.private" -> "module.my_vpc.aws_vpc.main";
  "module.my_vpc.aws_subnet.public" -> "module.my_vpc.aws_vpc.main";
  "module.rds_sg.aws_security_group.this" -> "module.my_vpc.aws_vpc.main";
  "module.rds_sg.aws_security_group_rule.egress" -> "module.rds_sg.aws_security_group.this";
  "module.rds_sg.aws_security_group_rule.ingress" -> "module.ec2_sg.aws_security_group.this";
  "module.rds_sg.aws_security_group_rule.ingress" -> "module.rds_sg.aws_security_group.this";
  "module.servers.aws_eip.this" -> "module.servers.aws_instance.this";
  "module.servers.aws_instance.this" -> "module.ec2_sg.aws_security_group.this";
  "module.servers.aws_instance.this" -> "module.my_vpc.aws_subnet.private";
}
